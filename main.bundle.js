"use strict";(self.webpackChunkpikachu_volleyball=self.webpackChunkpikachu_volleyball||[]).push([[179],{982:(e,t,s)=>{s.d(t,{d:()=>i});const i={SPRITE_SHEET:"../resources/assets/images/sprite_sheet.json",TEXTURES:{},SOUNDS:{}},n=i.TEXTURES;n.PIKACHU=(e,t)=>`pikachu/pikachu_${e}_${t}.png`,n.BALL=e=>`ball/ball_${e}.png`,n.NUMBER=e=>`number/number_${e}.png`,n.SKY_BLUE="objects/sky_blue.png",n.MOUNTAIN="objects/mountain.png",n.GROUND_RED="objects/ground_red.png",n.GROUND_LINE="objects/ground_line.png",n.GROUND_LINE_LEFT_MOST="objects/ground_line_leftmost.png",n.GROUND_LINE_RIGHT_MOST="objects/ground_line_rightmost.png",n.GROUND_YELLOW="objects/ground_yellow.png",n.NET_PILLAR_TOP="objects/net_pillar_top.png",n.NET_PILLAR="objects/net_pillar.png",n.SHADOW="objects/shadow.png",n.BALL_HYPER="ball/ball_hyper.png",n.BALL_TRAIL="ball/ball_trail.png",n.BALL_PUNCH="ball/ball_punch.png",n.CLOUD="objects/cloud.png",n.WAVE="objects/wave.png",n.SACHISOFT="messages/common/sachisoft.png",n.READY="messages/common/ready.png",n.GAME_END="messages/common/game_end.png",n.MARK="messages/ja/mark.png",n.POKEMON="messages/ja/pokemon.png",n.PIKACHU_VOLLEYBALL="messages/ja/pikachu_volleyball.png",n.FIGHT="messages/ja/fight.png",n.WITH_COMPUTER="messages/ja/with_computer.png",n.WITH_FRIEND="messages/ja/with_friend.png",n.GAME_START="messages/ja/game_start.png",n.SITTING_PIKACHU="sitting_pikachu.png";const l=i.SOUNDS;l.BGM="../resources/assets/sounds/bgm.mp3",l.PIPIKACHU="../resources/assets/sounds/WAVE140_1.wav",l.PIKA="../resources/assets/sounds/WAVE141_1.wav",l.CHU="../resources/assets/sounds/WAVE142_1.wav",l.PI="../resources/assets/sounds/WAVE143_1.wav",l.PIKACHU="../resources/assets/sounds/WAVE144_1.wav",l.POWERHIT="../resources/assets/sounds/WAVE145_1.wav",l.BALLTOUCHESGROUND="../resources/assets/sounds/WAVE146_1.wav"},372:(e,t,s)=>{var i=s(812),n=s(451);function l(){return Math.floor(32768*Math.random())}var a=1,o=[!0,!0,!0,!0,!0,!0,!0,!0,!0],r=[!0,!0,!0,!0,!0,!0];const h={_precedence:0,pause:function(e,t){t>this._precedence&&(e.paused=!0,this._precedence=t)},resume:function(e,t){t===this._precedence&&(e.paused=!1,this._precedence=0)}};function d(e,t){m(),u(e),document.getElementById(e).classList.toggle("show")?h.pause(t,1):h.resume(t,1)}function c(e,t){m(),document.getElementById(e).classList.add("open"),document.getElementById(t).classList.add("show")}function u(e){const t=document.getElementsByClassName("dropdown");for(let s=0;s<t.length;s++)t[s].id!==e&&t[s].classList.remove("show")}function m(){const e=document.getElementsByClassName("submenu");for(let t=0;t<e.length;t++)e[t].classList.remove("show");const t=document.getElementsByClassName("submenu-btn");for(let e=0;e<t.length;e++)t[e].classList.remove("open")}const y=432,p=216,b=244,g=252;class f{constructor(e,t){this.player1=new v(!1,e),this.player2=new v(!0,t),this.ball=new k(!1)}runEngineForNextFrame(e){const t=function(e,t,s,i){const n=function(e){e.previousPreviousX=e.previousX,e.previousPreviousY=e.previousY,e.previousX=e.x,e.previousY=e.y;let t=e.fineRotation+(e.xVelocity/2|0);t<0?t+=50:t>50&&(t+=-50),e.fineRotation=t,e.rotation=e.fineRotation/10|0;const s=e.x+e.xVelocity;(s<20||s>y)&&(e.xVelocity=-e.xVelocity);let i=e.y+e.yVelocity;return i<0&&(e.yVelocity=1),Math.abs(e.x-p)<25&&e.y>176&&(e.y<=192?e.yVelocity>0&&(e.yVelocity=-e.yVelocity):e.x<p?e.xVelocity=-Math.abs(e.xVelocity):e.xVelocity=Math.abs(e.xVelocity)),i=e.y+e.yVelocity,i>g?(e.sound.ballTouchesGround=!0,e.yVelocity=-e.yVelocity,e.punchEffectX=e.x,e.y=g,e.punchEffectRadius=20,e.punchEffectY=272,!0):(e.y=i,e.x=e.x+e.xVelocity,e.yVelocity+=1,!1)}(s);let l,a;for(let n=0;n<2;n++)0===n?(l=e,a=t):(l=t,a=e),L(s),S(l,i[n],a,s);for(let n=0;n<2;n++)l=0===n?e:t,!0===w(s,l.x,l.y)?!1===l.isCollisionWithBallHappened&&(E(s,l.x,i[n],l.state),l.isCollisionWithBallHappened=!0):l.isCollisionWithBallHappened=!1;return n}(this.player1,this.player2,this.ball,e);return t}}class v{constructor(e,t){this.isPlayer2=e,this.isComputer=t,this.initializeForNewRound(),this.divingDirection=0,this.lyingDownDurationLeft=-1,this.isWinner=!1,this.gameEnded=!1,this.computerWhereToStandBy=0,this.sound={pipikachu:!1,pika:!1,chu:!1}}initializeForNewRound(){this.x=36,this.isPlayer2&&(this.x=396),this.y=b,this.yVelocity=0,this.isCollisionWithBallHappened=!1,this.state=0,this.frameNumber=0,this.normalStatusArmSwingDirection=1,this.delayBeforeNextFrame=0,this.computerBoldness=l()%5,this.skillPhase=0,this.skillSubPhase=0,!1===this.isPlayer2?this.fullSkillMethod=function(){if(0==a)for(;;){var e=l()%9;if(o[e]&&(K(o)<=2||e!=U))return e}else if(1==a)for(;;){if(o[G%9])return G%9;G++}}():!0===this.isPlayer2&&(this.fullSkillMethod=function(){if(0===a)for(;;){var e=l()%6;if(r[e]&&(K(o)<=2||e!=U))return e}else if(1===a)for(;;){if(r[G%6])return G%6;G++}}()),U=this.fullSkillMethod,this.usingSkill=P.none,this.serveFixedOrder=!0}}class k{constructor(e){this.initializeForNewRound(e),this.expectedLandingPointX=0,this.rotation=0,this.fineRotation=0,this.punchEffectX=0,this.punchEffectY=0,this.previousX=0,this.previousPreviousX=0,this.previousY=0,this.previousPreviousY=0,this.sound={powerHit:!1,ballTouchesGround:!1}}initializeForNewRound(e){this.x=56,!0===e&&(this.x=376),this.y=0,this.xVelocity=0,this.yVelocity=1,this.punchEffectRadius=0,this.isPowerHit=!1}}function w(e,t,s){let i=e.x-t;return Math.abs(i)<=32&&(i=e.y-s,Math.abs(i)<=32)}function S(e,t,s,i){if(!0===e.isComputer&&function(e,t,s,i){if(i.xDirection=0,i.yDirection=0,i.powerHit=0,!1===e.isPlayer2)return function(e,t,s,i){function n(){!0===e.serveFixedOrder&&(e.fullSkillMethod===C?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase&&(e.usingSkill=P.breakNet):e.fullSkillMethod===B?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase&&(e.usingSkill=P.tossAndFlat):e.fullSkillMethod===I?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.headThunderJump:2===e.skillPhase&&(e.usingSkill=P.headThunder):e.fullSkillMethod===D?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase?e.usingSkill=P.hitNet:3===e.skillPhase&&(e.usingSkill=P.netVSmash):e.fullSkillMethod===N?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.headThunderJump:2===e.skillPhase&&(e.usingSkill=P.fakeHeadThunderFlat):e.fullSkillMethod===M?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase?e.usingSkill=P.hitNet:3===e.skillPhase&&(e.usingSkill=P.netRSmash):e.fullSkillMethod===T?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase?e.usingSkill=P.hitNet:3===e.skillPhase&&(e.usingSkill=P.netGSmash):e.fullSkillMethod===V?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase?e.usingSkill=P.hitNet:3===e.skillPhase&&(e.usingSkill=P.netRGSmash):e.fullSkillMethod===A&&(0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase?e.usingSkill=P.hitNet:3===e.skillPhase&&(e.usingSkill=P.netDodge))),e.skillPhase++,e.skillSubPhase=0}0===e.skillPhase?(n(),G++):1===e.skillPhase?e.usingSkill===P.halfStep&&(0===e.skillSubPhase?(i.xDirection=1,e.skillSubPhase++):1===e.skillSubPhase&&e.isCollisionWithBallHappened&&n()):2===e.skillPhase?e.usingSkill===P.walkUntilNet?(i.xDirection=1,t.y>50&&t.x>116&&n()):e.usingSkill===P.headThunderJump&&(0===e.skillSubPhase?(i.xDirection=1,e.x>82&&e.skillSubPhase++):1===e.skillSubPhase&&(i.xDirection=1,i.yDirection=-1,e.x>157&&n())):3===e.skillPhase?e.usingSkill===P.breakNet?0===e.skillSubPhase?(i.yDirection=-1,e.skillSubPhase++):1===e.skillSubPhase&&(i.xDirection=1,i.yDirection=1,i.powerHit=1):e.usingSkill===P.tossAndFlat?(0===e.skillSubPhase&&t.y>100&&e.skillSubPhase++,1===e.skillSubPhase?(i.yDirection=-1,e.skillSubPhase++):2===e.skillSubPhase&&(i.xDirection=1,i.powerHit=1)):e.usingSkill===P.headThunder?0===e.skillSubPhase?(i.yDirection=1,i.powerHit=1,e.isCollisionWithBallHappened&&e.skillSubPhase++):1===e.skillSubPhase&&(i.xDirection=1,i.yDirection=1,i.powerHit=1):e.usingSkill===P.hitNet?0===e.skillSubPhase?t.y>176&&t.x>132&&e.skillSubPhase++:1===e.skillSubPhase&&(i.xDirection=1,i.yDirection=-1,i.powerHit=1,t.x>132&&t.xVelocity>0&&n()):e.usingSkill===P.fakeHeadThunderFlat&&(i.xDirection=1,i.powerHit=1):4===e.skillPhase&&(e.usingSkill===P.netVSmash?(i.yDirection=1,i.powerHit=1):e.usingSkill===P.netRSmash?(i.yDirection=-1,i.powerHit=1):e.usingSkill===P.netGSmash?(i.xDirection=1,i.powerHit=1):e.usingSkill===P.netRGSmash?(i.xDirection=1,i.yDirection=-1,i.powerHit=1):e.usingSkill===P.netDodge&&(i.xDirection=-1))}(e,t,0,i);if(!0===e.isPlayer2)return function(e,t,s,i){function n(){!0===e.serveFixedOrder&&(e.fullSkillMethod===O?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase?e.usingSkill=P.hitNet:3===e.skillPhase&&(e.usingSkill=P.netThunder):e.fullSkillMethod===_?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase?e.usingSkill=P.hitNet:3===e.skillPhase&&(e.usingSkill=P.fakeNetThunderFlat):e.fullSkillMethod===W?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase&&(e.usingSkill=P.tossAndFlat):e.fullSkillMethod===R?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.headThunderJump:2===e.skillPhase&&(e.usingSkill=P.headThunder):e.fullSkillMethod===F?0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.headThunderJump:2===e.skillPhase&&(e.usingSkill=P.fakeHeadThunderFlat):e.fullSkillMethod===H&&(0===e.skillPhase?e.usingSkill=P.halfStep:1===e.skillPhase?e.usingSkill=P.walkUntilNet:2===e.skillPhase&&(e.usingSkill=P.breakNet))),e.skillPhase++,e.skillSubPhase=0}0===e.skillPhase&&(n(),G++),1===e.skillPhase?e.usingSkill===P.halfStep&&(0===e.skillSubPhase?(i.xDirection=-1,e.skillSubPhase++):1===e.skillSubPhase&&e.isCollisionWithBallHappened&&n()):2===e.skillPhase?e.usingSkill===P.walkUntilNet?(i.xDirection=-1,t.y>50&&t.x<300&&n()):e.usingSkill===P.headThunderJump&&(0===e.skillSubPhase?(i.xDirection=-1,e.x<350&&e.skillSubPhase++):1===e.skillSubPhase&&(i.xDirection=-1,i.yDirection=-1,e.x<275&&n())):3===e.skillPhase?e.usingSkill===P.hitNet?0===e.skillSubPhase?t.y>176&&t.x<300&&e.skillSubPhase++:1===e.skillSubPhase&&(i.xDirection=-1,i.yDirection=-1,i.powerHit=1,t.x<300&&t.xVelocity<0&&n()):e.usingSkill===P.tossAndFlat?(0===e.skillSubPhase&&t.y>100&&e.skillSubPhase++,1===e.skillSubPhase?(i.yDirection=-1,e.skillSubPhase++):2===e.skillSubPhase&&(i.xDirection=-1,i.powerHit=1)):e.usingSkill===P.headThunder?0===e.skillSubPhase?(i.yDirection=1,i.powerHit=1,e.isCollisionWithBallHappened&&e.skillSubPhase++):1===e.skillSubPhase&&(i.xDirection=-1,i.yDirection=1,i.powerHit=1):e.usingSkill===P.fakeHeadThunderFlat?(i.xDirection=-1,i.powerHit=1):e.usingSkill===P.breakNet&&(0===e.skillSubPhase?(i.yDirection=-1,e.skillSubPhase++):1===e.skillSubPhase&&(i.xDirection=-1,i.yDirection=1,i.powerHit=1)):4===e.skillPhase&&(e.usingSkill===P.netThunder?(i.yDirection=1,i.powerHit=1):e.usingSkill===P.fakeNetThunderFlat&&(i.xDirection=-1,i.powerHit=1))}(e,t,0,i);let n=t.expectedLandingPointX;if(Math.abs(t.x-e.x)>100&&Math.abs(t.xVelocity)<e.computerBoldness+5){const s=Number(e.isPlayer2)*p;(t.expectedLandingPointX<=s||t.expectedLandingPointX>=Number(e.isPlayer2)*y+p)&&0===e.computerWhereToStandBy&&(n=s+108)}if(Math.abs(n-e.x)>e.computerBoldness+8?e.x<n?i.xDirection=1:i.xDirection=-1:l()%20==0&&(e.computerWhereToStandBy=l()%2),0===e.state){Math.abs(t.xVelocity)<e.computerBoldness+3&&Math.abs(t.x-e.x)<32&&t.y>-36&&t.y<10*e.computerBoldness+84&&t.yVelocity>0&&(i.yDirection=-1);const s=Number(e.isPlayer2)*p,n=(Number(e.isPlayer2)+1)*p;t.expectedLandingPointX>s&&t.expectedLandingPointX<n&&Math.abs(t.x-e.x)>5*e.computerBoldness+64&&t.x>s&&t.x<n&&t.y>174&&(i.powerHit=1,e.x<t.x?i.xDirection=1:i.xDirection=-1)}else if((1===e.state||2===e.state)&&(Math.abs(t.x-e.x)>8&&(e.x<t.x?i.xDirection=1:i.xDirection=-1),Math.abs(t.x-e.x)<48&&Math.abs(t.y-e.y)<48)){const n=function(e,t,s,i){if(l()%2==0)for(let n=1;n>-1;n--)for(let l=-1;l<2;l++){const a=x(n,l,t);if((a<=Number(e.isPlayer2)*p||a>=Number(e.isPlayer2)*y+p)&&Math.abs(a-s.x)>64)return i.xDirection=n,i.yDirection=l,!0}else for(let n=1;n>-1;n--)for(let l=1;l>-2;l--){const a=x(n,l,t);if((a<=Number(e.isPlayer2)*p||a>=Number(e.isPlayer2)*y+p)&&Math.abs(a-s.x)>64)return i.xDirection=n,i.yDirection=l,!0}return!1}(e,t,s,i);!0===n&&(i.powerHit=1,Math.abs(s.x-e.x)<80&&-1!==i.yDirection&&(i.yDirection=-1))}}(e,i,s,t),4===e.state)return e.lyingDownDurationLeft+=-1,void(e.lyingDownDurationLeft<-1&&(e.state=0));let n=0;e.state<5&&(n=e.state<3?6*t.xDirection:8*e.divingDirection);const a=e.x+n;e.x=a,!1===e.isPlayer2?a<32?e.x=32:a>184&&(e.x=184):a<248?e.x=248:a>400&&(e.x=400),e.state<3&&-1===t.yDirection&&e.y===b&&(e.yVelocity=-16,e.state=1,e.frameNumber=0,e.sound.chu=!0);const o=e.y+e.yVelocity;if(e.y=o,o<b?e.yVelocity+=1:o>b&&(e.yVelocity=0,e.y=b,e.frameNumber=0,3===e.state?(e.state=4,e.frameNumber=0,e.lyingDownDurationLeft=3):e.state=0),1===t.powerHit&&(1===e.state?(e.delayBeforeNextFrame=5,e.frameNumber=0,e.state=2,e.sound.pika=!0):0===e.state&&0!==t.xDirection&&(e.state=3,e.frameNumber=0,e.divingDirection=t.xDirection,e.yVelocity=-5,e.sound.chu=!0)),1===e.state)e.frameNumber=(e.frameNumber+1)%3;else if(2===e.state)e.delayBeforeNextFrame<1?(e.frameNumber+=1,e.frameNumber>4&&(e.frameNumber=0,e.state=1)):e.delayBeforeNextFrame-=1;else if(0===e.state&&(e.delayBeforeNextFrame+=1,e.delayBeforeNextFrame>3)){e.delayBeforeNextFrame=0;const t=e.frameNumber+e.normalStatusArmSwingDirection;(t<0||t>4)&&(e.normalStatusArmSwingDirection=-e.normalStatusArmSwingDirection),e.frameNumber=e.frameNumber+e.normalStatusArmSwingDirection}!0===e.gameEnded&&(0===e.state&&(!0===e.isWinner?(e.state=5,e.sound.pipikachu=!0):e.state=6,e.delayBeforeNextFrame=0,e.frameNumber=0),function(e){!0===e.gameEnded&&e.frameNumber<4&&(e.delayBeforeNextFrame+=1,e.delayBeforeNextFrame>4&&(e.delayBeforeNextFrame=0,e.frameNumber+=1))}(e))}function E(e,t,s,i){e.x<t?e.xVelocity=-(Math.abs(e.x-t)/3|0):e.x>t&&(e.xVelocity=Math.abs(e.x-t)/3|0),0===e.xVelocity&&(e.xVelocity=l()%3-1);const n=Math.abs(e.yVelocity);e.yVelocity=-n,n<15&&(e.yVelocity=-15),2===i?(e.x<p?e.xVelocity=10*(Math.abs(s.xDirection)+1):e.xVelocity=10*-(Math.abs(s.xDirection)+1),e.punchEffectX=e.x,e.punchEffectY=e.y,e.yVelocity=Math.abs(e.yVelocity)*s.yDirection*2,e.punchEffectRadius=20,e.sound.powerHit=!0,e.isPowerHit=!0):e.isPowerHit=!1,L(e)}function L(e){const t={x:e.x,y:e.y,xVelocity:e.xVelocity,yVelocity:e.yVelocity};let s=0;for(;;){s++;const e=t.xVelocity+t.x;if((e<20||e>y)&&(t.xVelocity=-t.xVelocity),t.y+t.yVelocity<0&&(t.yVelocity=1),Math.abs(t.x-p)<25&&t.y>176&&(t.y<192?t.yVelocity>0&&(t.yVelocity=-t.yVelocity):t.x<p?t.xVelocity=-Math.abs(t.xVelocity):t.xVelocity=Math.abs(t.xVelocity)),t.y=t.y+t.yVelocity,t.y>g||s>=1e3)break;t.x=t.x+t.xVelocity,t.yVelocity+=1}e.expectedLandingPointX=t.x}function x(e,t,s){const i={x:s.x,y:s.y,xVelocity:s.xVelocity,yVelocity:s.yVelocity};i.x<p?i.xVelocity=10*(Math.abs(e)+1):i.xVelocity=10*-(Math.abs(e)+1),i.yVelocity=Math.abs(i.yVelocity)*t*2;let n=0;for(;;){n++;const e=i.x+i.xVelocity;if((e<20||e>y)&&(i.xVelocity=-i.xVelocity),i.y+i.yVelocity<0&&(i.yVelocity=1),Math.abs(i.x-p)<25&&i.y>176&&i.yVelocity>0&&(i.yVelocity=-i.yVelocity),i.y=i.y+i.yVelocity,i.y>g||n>=1e3)return i.x;i.x=i.x+i.xVelocity,i.yVelocity+=1}}const P={none:0,halfStep:1,walkUntilNet:2,hitNet:3,netThunder:4,fakeNetThunderFlat:5,headThunderJump:6,tossAndFlat:7,fakeHeadThunderFlat:8,breakNet:9,netVSmash:10,netRSmash:11,netGSmash:12,netRGSmash:13,netDodge:14},C=0,B=1,I=2,N=3,D=4,M=5,T=6,V=7,A=8,H=0,W=1,R=2,F=3,O=4,_=5;var U=-1;function K(e){return e.filter((e=>!0===e)).length}var G=0;class X{constructor(){this.topLeftPointX=l()%500-68,this.topLeftPointY=l()%152,this.topLeftPointXVelocity=1+l()%2,this.sizeDiffTurnNumber=l()%11}get sizeDiff(){return 5-Math.abs(this.sizeDiffTurnNumber-5)}get spriteTopLeftPointX(){return this.topLeftPointX-this.sizeDiff}get spriteTopLeftPointY(){return this.topLeftPointY-this.sizeDiff}get spriteWidth(){return 48+2*this.sizeDiff}get spriteHeight(){return 24+2*this.sizeDiff}}class j{constructor(){this.verticalCoord=0,this.verticalCoordVelocity=2,this.yCoords=[];for(let e=0;e<27;e++)this.yCoords.push(314)}}var z=s(982);const Y=z.d.TEXTURES;class J{constructor(e){const t=e[z.d.SPRITE_SHEET].textures;this.mark=Q(t,Y.MARK,.5,.5),this.mark.x=216,this.mark.y=152,this.container=new i.W2,this.container.addChild(this.mark)}get visible(){return this.container.visible}set visible(e){this.container.visible=e}drawMark(e){const t=this.mark;0!==e?e<100?t.alpha=Math.min(1,t.alpha+.04):e>=100&&(t.alpha=Math.max(0,t.alpha-.04)):t.alpha=0}}class Z{constructor(e){const t=e[z.d.SPRITE_SHEET].textures;this.messages={pokemon:Q(t,Y.POKEMON,0,0),pikachuVolleyball:Q(t,Y.PIKACHU_VOLLEYBALL,0,0),withWho:[Q(t,Y.WITH_COMPUTER,0,0),Q(t,Y.WITH_FRIEND,0,0)],sachisoft:Q(t,Y.SACHISOFT,0,0),fight:Q(t,Y.FIGHT,0,0)},this.sittingPikachuTilesContainer=function(e){const t=new i.W2,s=e[Y.SITTING_PIKACHU],n=s.width,l=s.height;let a;for(let e=0;e<Math.floor(304/l)+2;e++)for(let o=0;o<Math.floor(432/n)+2;o++)a=new i.jy(s),te(t,a,n*o,l*e);return t}(t),this.messages.sachisoft.x=216-this.messages.sachisoft.texture.width/2,this.messages.sachisoft.y=264,this.messages.pikachuVolleyball.x=140,this.messages.pikachuVolleyball.y=80,this.messages.pokemon.x=170,this.messages.pokemon.y=40,this.container=new i.W2,this.container.addChild(this.sittingPikachuTilesContainer),this.container.addChild(this.messages.pokemon),this.container.addChild(this.messages.pikachuVolleyball),this.container.addChild(this.messages.withWho[0]),this.container.addChild(this.messages.withWho[1]),this.container.addChild(this.messages.sachisoft),this.container.addChild(this.messages.fight),this.initializeVisibles(),this.sittingPikachuTilesDisplacement=0,this.selectedWithWho=-1,this.selectedWithWhoMessageSizeIncrement=2}get visible(){return this.container.visible}set visible(e){this.container.visible=e,!1===e&&this.initializeVisibles()}initializeVisibles(){for(const e in this.messages)this.messages[e].visible=!1}drawFightMessage(e){const t=[20,22,25,27,30,27,25,22,20],s=this.messages.fight,i=s.texture.width,n=s.texture.height;if(0===e&&(s.visible=!0),e<30){const t=Math.floor(Math.floor(e*i/30)/2),l=Math.floor(Math.floor(e*n/30)/2);s.width=2*t,s.height=2*l,s.x=100-t,s.y=70-l}else{const l=(e+1)%9,a=Math.floor(Math.floor(t[l]*i/30)/2),o=Math.floor(Math.floor(t[l]*n/30)/2);s.width=2*a,s.height=2*o,s.y=70-o,s.x=100-a}}drawSachisoft(e){0===e&&(this.messages.sachisoft.visible=!0,this.messages.sachisoft.alpha=0),this.messages.sachisoft.alpha=Math.min(1,this.messages.sachisoft.alpha+.04),e>70&&(this.messages.sachisoft.alpha=1)}drawSittingPikachuTiles(e){0===e&&(this.sittingPikachuTilesContainer.visible=!0,this.sittingPikachuTilesContainer.alpha=0);const t=this.sittingPikachuTilesContainer.getChildAt(0).texture.height;this.sittingPikachuTilesDisplacement=(this.sittingPikachuTilesDisplacement+2)%t,this.sittingPikachuTilesContainer.x=-this.sittingPikachuTilesDisplacement,this.sittingPikachuTilesContainer.y=-this.sittingPikachuTilesDisplacement,e>30&&(this.sittingPikachuTilesContainer.alpha=Math.min(1,this.sittingPikachuTilesContainer.alpha+.04)),e>70&&(this.sittingPikachuTilesContainer.alpha=1)}drawPikachuVolleyballMessage(e){if(0!==e)if(e>30&&(this.messages.pikachuVolleyball.visible=!0),e>30&&e<=44){const t=195-15*(e-30);this.messages.pikachuVolleyball.x=140+t}else e>44&&e<=55?(this.messages.pikachuVolleyball.x=140,this.messages.pikachuVolleyball.width=200-15*(e-44)):e>55&&e<=71?(this.messages.pikachuVolleyball.x=140,this.messages.pikachuVolleyball.width=40+15*(e-55)):e>71&&(this.messages.pikachuVolleyball.x=140,this.messages.pikachuVolleyball.width=this.messages.pikachuVolleyball.texture.width);else this.messages.pikachuVolleyball.visible=!1}drawPokemonMessage(e){0!==e?e>71&&(this.messages.pokemon.visible=!0):this.messages.pokemon.visible=!1}drawWithWhoMessages(e){const t=this.messages.withWho,s=t[0].texture.width,i=t[0].texture.height;if(0!==e){if(e>70){this.selectedWithWhoMessageSizeIncrement<10&&(this.selectedWithWhoMessageSizeIncrement+=1);for(let e=0;e<2;e++){const n=Number(this.selectedWithWho===e),l=n*(this.selectedWithWhoMessageSizeIncrement+2),a=n*this.selectedWithWhoMessageSizeIncrement;t[e].visible=!0,t[e].x=216-s/2-l,t[e].y=184+30*e-a,t[e].width=s+2*l,t[e].height=i+2*a}}}else for(let e=0;e<2;e++)t[e].visible=!1}selectWithWho(e){this.selectedWithWho=e,this.selectedWithWhoMessageSizeIncrement=2}}class ${constructor(e){const t=e[z.d.SPRITE_SHEET].textures;this.bgContainer=function(e){const t=new i.W2;let s,n=e[Y.SKY_BLUE];for(let e=0;e<12;e++)for(let l=0;l<27;l++)s=new i.jy(n),te(t,s,16*l,16*e);n=e[Y.MOUNTAIN],s=new i.jy(n),te(t,s,0,188),n=e[Y.GROUND_RED];for(let e=0;e<27;e++)s=new i.jy(n),te(t,s,16*e,248);n=e[Y.GROUND_LINE];for(let e=1;e<26;e++)s=new i.jy(n),te(t,s,16*e,264);n=e[Y.GROUND_LINE_LEFT_MOST],s=new i.jy(n),te(t,s,0,264),n=e[Y.GROUND_LINE_RIGHT_MOST],s=new i.jy(n),te(t,s,416,264),n=e[Y.GROUND_YELLOW];for(let e=0;e<2;e++)for(let l=0;l<27;l++)s=new i.jy(n),te(t,s,16*l,280+16*e);n=e[Y.NET_PILLAR_TOP],s=new i.jy(n),te(t,s,213,176),n=e[Y.NET_PILLAR];for(let e=0;e<12;e++)s=new i.jy(n),te(t,s,213,184+8*e);return t}(t);const s=function(e){const t=(t,s)=>e[Y.PIKACHU(t,s)],s=[];for(let e=0;e<7;e++)if(3===e)s.push(t(e,0)),s.push(t(e,1));else if(4===e)s.push(t(e,0));else for(let i=0;i<5;i++)s.push(t(e,i));const n=new i.Kg(s,!1),l=new i.Kg(s,!1);return n.anchor.x=.5,n.anchor.y=.5,l.anchor.x=.5,l.anchor.y=.5,[n,l]}(t);this.player1=s[0],this.player2=s[1],this.ball=function(e){const t=t=>e[Y.BALL(t)],s=[t(0),t(1),t(2),t(3),t(4),t("hyper")],n=new i.Kg(s,!1);return n.anchor.x=.5,n.anchor.y=.5,n}(t),this.ballHyper=Q(t,Y.BALL_HYPER,.5,.5),this.ballTrail=Q(t,Y.BALL_TRAIL,.5,.5),this.punch=Q(t,Y.BALL_PUNCH,.5,.5),this.scoreBoards=[ee(t),ee(t)],this.shadows={forPlayer1:Q(t,Y.SHADOW,.5,.5),forPlayer2:Q(t,Y.SHADOW,.5,.5),forBall:Q(t,Y.SHADOW,.5,.5)},this.messages={gameStart:Q(t,Y.GAME_START,0,0),ready:Q(t,Y.READY,0,0),gameEnd:Q(t,Y.GAME_END,0,0)},this.cloudContainer=function(e){const t=new i.W2,s=e[Y.CLOUD];for(let e=0;e<10;e++){const e=new i.jy(s);e.anchor.x=0,e.anchor.y=0,t.addChild(e)}return t}(t),this.waveContainer=function(e){const t=new i.W2,s=e[Y.WAVE];for(let e=0;e<27;e++)te(t,new i.jy(s),16*e,0);return t}(t),this.container=new i.W2,this.container.addChild(this.bgContainer),this.container.addChild(this.cloudContainer),this.container.addChild(this.waveContainer),this.container.addChild(this.shadows.forPlayer1),this.container.addChild(this.shadows.forPlayer2),this.container.addChild(this.shadows.forBall),this.container.addChild(this.player1),this.container.addChild(this.player2),this.container.addChild(this.ballTrail),this.container.addChild(this.ballHyper),this.container.addChild(this.ball),this.container.addChild(this.punch),this.container.addChild(this.scoreBoards[0]),this.container.addChild(this.scoreBoards[1]),this.container.addChild(this.messages.gameStart),this.container.addChild(this.messages.ready),this.container.addChild(this.messages.gameEnd),this.bgContainer.x=0,this.bgContainer.y=0,this.cloudContainer.x=0,this.cloudContainer.y=0,this.waveContainer.x=0,this.waveContainer.y=0,this.messages.ready.x=176,this.messages.ready.y=38,this.scoreBoards[0].x=14,this.scoreBoards[0].y=10,this.scoreBoards[1].x=354,this.scoreBoards[1].y=10,this.shadows.forPlayer1.y=273,this.shadows.forPlayer2.y=273,this.shadows.forBall.y=273,this.initializeVisibles(),this.cloudArray=[];for(let e=0;e<10;e++)this.cloudArray.push(new X);this.wave=new j}get visible(){return this.container.visible}set visible(e){this.container.visible=e,!1===e&&this.initializeVisibles()}initializeVisibles(){for(const e in this.messages)this.messages[e].visible=!1}drawPlayersAndBall(e){const t=e.player1,s=e.player2,i=e.ball;this.player1.x=t.x,this.player1.y=t.y,3===t.state||4===t.state?this.player1.scale.x=-1===t.divingDirection?-1:1:this.player1.scale.x=1,this.shadows.forPlayer1.x=t.x,this.player2.x=s.x,this.player2.y=s.y,3===s.state||4===s.state?this.player2.scale.x=1===s.divingDirection?1:-1:this.player2.scale.x=-1,this.shadows.forPlayer2.x=s.x;const n=se(t.state,t.frameNumber),l=se(s.state,s.frameNumber);this.player1.gotoAndStop(n),this.player2.gotoAndStop(l),this.ball.x=i.x,this.ball.y=i.y,this.shadows.forBall.x=i.x,this.ball.gotoAndStop(i.rotation),i.punchEffectRadius>0?(i.punchEffectRadius-=2,this.punch.width=2*i.punchEffectRadius,this.punch.height=2*i.punchEffectRadius,this.punch.x=i.punchEffectX,this.punch.y=i.punchEffectY,this.punch.visible=!0):this.punch.visible=!1,!0===i.isPowerHit?(this.ballHyper.x=i.previousX,this.ballHyper.y=i.previousY,this.ballTrail.x=i.previousPreviousX,this.ballTrail.y=i.previousPreviousY,this.ballHyper.visible=!0,this.ballTrail.visible=!0):(this.ballHyper.visible=!1,this.ballTrail.visible=!1)}drawScoresToScoreBoards(e){for(let t=0;t<2;t++){const s=this.scoreBoards[t],i=e[t],n=s.getChildAt(0),l=s.getChildAt(1);n.gotoAndStop(i%10),l.gotoAndStop(Math.floor(i/10)%10),l.visible=i>=10}}drawCloudsAndWave(){const e=this.cloudArray,t=this.wave;!function(e,t){for(let t=0;t<10;t++)e[t].topLeftPointX+=e[t].topLeftPointXVelocity,e[t].topLeftPointX>432&&(e[t].topLeftPointX=-68,e[t].topLeftPointY=l()%152,e[t].topLeftPointXVelocity=1+l()%2),e[t].sizeDiffTurnNumber=(e[t].sizeDiffTurnNumber+1)%11;t.verticalCoord+=t.verticalCoordVelocity,t.verticalCoord>32?(t.verticalCoord=32,t.verticalCoordVelocity=-1):t.verticalCoord<0&&t.verticalCoordVelocity<0&&(t.verticalCoordVelocity=2,t.verticalCoord=-l()%40);for(let e=0;e<27;e++)t.yCoords[e]=314-t.verticalCoord+l()%3}(e,t);for(let t=0;t<10;t++){const s=e[t],i=this.cloudContainer.getChildAt(t);i.x=s.spriteTopLeftPointX,i.y=s.spriteTopLeftPointY,i.width=s.spriteWidth,i.height=s.spriteHeight}for(let e=0;e<27;e++)this.waveContainer.getChildAt(e).y=t.yCoords[e]}drawGameStartMessage(e,t){if(0===e)this.messages.gameStart.visible=!0;else if(e>=t-1)return void(this.messages.gameStart.visible=!1);const s=this.messages.gameStart,i=s.texture.width,n=s.texture.height,l=Math.floor(i*e/50),a=Math.floor(n*e/50);s.x=216-l,s.y=50+2*a,s.width=2*l,s.height=2*a}drawReadyMessage(e){this.messages.ready.visible=e}toggleReadyMessage(){this.messages.ready.visible=!this.messages.ready.visible}drawGameEndMessage(e){const t=this.messages.gameEnd,s=t.texture.width,i=t.texture.height;if(0===e&&(t.visible=!0),e<50){const n=2*Math.floor((50-e)*s/50),l=2*Math.floor((50-e)*i/50);t.x=216-s/2-n,t.y=50-l,t.width=s+2*n,t.height=i+2*l}else t.x=216-s/2,t.y=50,t.width=s,t.height=i}}class q{constructor(){this.black=new i.TC,this.black.beginFill(0),this.black.drawRect(0,0,432,304),this.black.endFill(),this.black.x=0,this.black.y=0,this.black.alpha=1}get visible(){return this.black.visible}set visible(e){this.black.visible=e}setBlackAlphaTo(e){this.black.alpha=e,0===this.black.alpha?this.black.visible=!1:this.black.visible=!0}changeBlackAlphaBy(e){this.black.alpha=e>=0?Math.min(1,this.black.alpha+e):Math.max(0,this.black.alpha+e),0===this.black.alpha?this.black.visible=!1:this.black.visible=!0}}function Q(e,t,s,n){const l=new i.jy(e[t]);return l.anchor.x=s,l.anchor.y=n,l}function ee(e){const t=[];for(let i=0;i<10;i++)t.push((s=i,e[Y.NUMBER(s)]));var s;const n=[null,null];n[0]=new i.Kg(t,!1),n[1]=new i.Kg(t,!1);const l=new i.W2;return te(l,n[0],32,0),te(l,n[1],0,0),l.setChildIndex(n[0],0),l.setChildIndex(n[1],1),l}function te(e,t,s,i){e.addChild(t),t.anchor.x=0,t.anchor.y=0,t.x=s,t.y=i}function se(e,t){return e<4?5*e+t:4===e?17+t:e>4?18+5*(e-5)+t:void 0}class ie extends class{constructor(){this.xDirection=0,this.yDirection=0,this.powerHit=0}}{constructor(e,t,s,i,n,l=null){super(),this.powerHitKeyIsDownPrevious=!1,this.leftKey=new ne(e),this.rightKey=new ne(t),this.upKey=new ne(s),this.downKey=new ne(i),this.powerHitKey=new ne(n),this.downRightKey=new ne(l)}getInput(){this.leftKey.isDown?this.xDirection=-1:this.rightKey.isDown||this.downRightKey&&this.downRightKey.isDown?this.xDirection=1:this.xDirection=0,this.upKey.isDown?this.yDirection=-1:this.downKey.isDown||this.downRightKey&&this.downRightKey.isDown?this.yDirection=1:this.yDirection=0;const e=this.powerHitKey.isDown;!this.powerHitKeyIsDownPrevious&&e?this.powerHit=1:this.powerHit=0,this.powerHitKeyIsDownPrevious=e}subscribe(){this.leftKey.subscribe(),this.rightKey.subscribe(),this.upKey.subscribe(),this.downKey.subscribe(),this.powerHitKey.subscribe(),this.downRightKey.subscribe()}unsubscribe(){this.leftKey.unsubscribe(),this.rightKey.unsubscribe(),this.upKey.unsubscribe(),this.downKey.unsubscribe(),this.powerHitKey.unsubscribe(),this.downRightKey.unsubscribe()}}class ne{constructor(e){this.value=e,this.isDown=!1,this.isUp=!0,this.downListener=this.downHandler.bind(this),this.upListner=this.upHandler.bind(this),this.subscribe()}downHandler(e){e.code===this.value&&(this.isDown=!0,this.isUp=!1,e.preventDefault())}upHandler(e){e.code===this.value&&(this.isDown=!1,this.isUp=!0,e.preventDefault())}subscribe(){window.addEventListener("keydown",this.downListener),window.addEventListener("keyup",this.upListner)}unsubscribe(){window.removeEventListener("keydown",this.downListener),window.removeEventListener("keyup",this.upListner),this.isDown=!1,this.isUp=!0}}const le=z.d.SOUNDS;class ae{constructor(e){this.sounds={bgm:new oe(e[le.BGM].sound),pipikachu:new oe(e[le.PIPIKACHU].sound),pika:new oe(e[le.PIKA].sound),chu:new oe(e[le.CHU].sound),pi:new oe(e[le.PI].sound),pikachu:new oe(e[le.PIKACHU].sound),powerHit:new oe(e[le.POWERHIT].sound),ballTouchesGround:new oe(e[le.BALLTOUCHESGROUND].sound)},this.sounds.bgm.loop=!0,this.properBGMVolume=.2,this.properSFXVolume=.35,this.adjustVolume()}adjustVolume(){for(const e in this.sounds)this.sounds[e].volume="bgm"===e?this.properBGMVolume:this.properSFXVolume}turnBGMVolume(e){let t;t=e?this.properBGMVolume:0,this.sounds.bgm.volume=t}turnSFXVolume(e){let t;t=e?this.properSFXVolume:0;for(const e in this.sounds)"bgm"!==e&&(this.sounds[e].volume=t)}}class oe{constructor(e){this.center=e,this.left=n.Z.Sound.from(e.url),this.right=n.Z.Sound.from(e.url);const t=new n.Z.filters.StereoFilter(0),s=new n.Z.filters.StereoFilter(-.75),i=new n.Z.filters.StereoFilter(.75);this.center.filters=[t],this.left.filters=[s],this.right.filters=[i]}set volume(e){this.center.volume=e,this.left.volume=e,this.right.volume=e}set loop(e){this.center.loop=e,this.left.loop=e,this.right.loop=e}play(e=0){0===e?this.center.play():-1===e?this.left.play():1===e&&this.right.play()}stop(){this.center.stop(),this.left.stop(),this.right.stop()}}class re{constructor(e,t){this.view={intro:new J(t),menu:new Z(t),game:new $(t),fadeInOut:new q},e.addChild(this.view.intro.container),e.addChild(this.view.menu.container),e.addChild(this.view.game.container),e.addChild(this.view.fadeInOut.black),this.view.intro.visible=!1,this.view.menu.visible=!1,this.view.game.visible=!1,this.view.fadeInOut.visible=!1,this.audio=new ae(t),this.physics=new f(!0,!0),this.keyboardArray=[new ie("KeyD","KeyG","KeyR","KeyV","KeyZ","KeyF"),new ie("ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter")],this.normalFPS=25,this.slowMotionFPS=5,this.SLOW_MOTION_FRAMES_NUM=6,this.slowMotionFramesLeft=0,this.slowMotionNumOfSkippedFrames=0,this.selectedWithWho=0,this.scores=[0,0],this.winningScore=30,this.gameEnded=!1,this.roundEnded=!1,this.isPlayer2Serve=!1,this.frameCounter=0,this.frameTotal={intro:165,afterMenuSelection:15,beforeStartOfNewGame:15,startOfNewGame:71,afterEndOfRound:5,beforeStartOfNextRound:30,gameEnd:211},this.noInputFrameCounter=0,this.noInputFrameTotal={menu:225},this.paused=!1,this.isStereoSound=!0,this._isPracticeMode=!1,this.state=this.intro}gameLoop(){if(!0!==this.paused){if(this.slowMotionFramesLeft>0){if(this.slowMotionNumOfSkippedFrames++,this.slowMotionNumOfSkippedFrames%Math.round(this.normalFPS/this.slowMotionFPS)!=0)return;this.slowMotionFramesLeft--,this.slowMotionNumOfSkippedFrames=0}this.keyboardArray[0].getInput(),this.keyboardArray[1].getInput(),this.state()}}intro(){0===this.frameCounter&&(this.view.intro.visible=!0,this.view.fadeInOut.setBlackAlphaTo(0),this.audio.sounds.bgm.stop()),this.view.intro.drawMark(this.frameCounter),this.frameCounter++,1!==this.keyboardArray[0].powerHit&&1!==this.keyboardArray[1].powerHit||(this.frameCounter=0,this.view.intro.visible=!1,this.state=this.menu),this.frameCounter>=this.frameTotal.intro&&(this.frameCounter=0,this.view.intro.visible=!1,this.state=this.menu)}menu(){if(0===this.frameCounter&&(this.view.menu.visible=!0,this.view.fadeInOut.setBlackAlphaTo(0),this.selectedWithWho=0,this.view.menu.selectWithWho(this.selectedWithWho)),this.view.menu.drawFightMessage(this.frameCounter),this.view.menu.drawSachisoft(this.frameCounter),this.view.menu.drawSittingPikachuTiles(this.frameCounter),this.view.menu.drawPikachuVolleyballMessage(this.frameCounter),this.view.menu.drawPokemonMessage(this.frameCounter),this.view.menu.drawWithWhoMessages(this.frameCounter),this.frameCounter++,this.frameCounter<71&&(1===this.keyboardArray[0].powerHit||1===this.keyboardArray[1].powerHit))this.frameCounter=71;else if(!(this.frameCounter<=71)){if(-1!==this.keyboardArray[0].yDirection&&-1!==this.keyboardArray[1].yDirection||1!==this.selectedWithWho?1!==this.keyboardArray[0].yDirection&&1!==this.keyboardArray[1].yDirection||0!==this.selectedWithWho?this.noInputFrameCounter++:(this.noInputFrameCounter=0,this.selectedWithWho=1,this.view.menu.selectWithWho(this.selectedWithWho),this.audio.sounds.pi.play()):(this.noInputFrameCounter=0,this.selectedWithWho=0,this.view.menu.selectWithWho(this.selectedWithWho),this.audio.sounds.pi.play()),1===this.keyboardArray[0].powerHit||1===this.keyboardArray[1].powerHit)return 1===this.selectedWithWho?(this.physics.player1.isComputer=!1,this.physics.player2.isComputer=!1):1===this.keyboardArray[0].powerHit?(this.physics.player1.isComputer=!1,this.physics.player2.isComputer=!0):1===this.keyboardArray[1].powerHit&&(this.physics.player1.isComputer=!0,this.physics.player2.isComputer=!1),this.audio.sounds.pikachu.play(),this.frameCounter=0,this.noInputFrameCounter=0,void(this.state=this.afterMenuSelection);this.noInputFrameCounter>=this.noInputFrameTotal.menu&&(this.physics.player1.isComputer=!0,this.physics.player2.isComputer=!0,this.frameCounter=0,this.noInputFrameCounter=0,this.state=this.afterMenuSelection)}}afterMenuSelection(){this.view.fadeInOut.changeBlackAlphaBy(1/16),this.frameCounter++,this.frameCounter>=this.frameTotal.afterMenuSelection&&(this.frameCounter=0,this.state=this.beforeStartOfNewGame)}beforeStartOfNewGame(){this.frameCounter++,this.frameCounter>=this.frameTotal.beforeStartOfNewGame&&(this.frameCounter=0,this.view.menu.visible=!1,this.state=this.startOfNewGame)}startOfNewGame(){0===this.frameCounter&&(this.view.game.visible=!0,this.gameEnded=!1,this.roundEnded=!1,this.isPlayer2Serve=!1,this.physics.player1.gameEnded=!1,this.physics.player1.isWinner=!1,this.physics.player2.gameEnded=!1,this.physics.player2.isWinner=!1,this.scores[0]=0,this.scores[1]=0,this.view.game.drawScoresToScoreBoards(this.scores),this.physics.player1.initializeForNewRound(),this.physics.player2.initializeForNewRound(),!0===this.physics.player1.isComputer?this.isPlayer2Serve=!1:!0===this.physics.player2.isComputer&&(this.isPlayer2Serve=!0),this.physics.ball.initializeForNewRound(this.isPlayer2Serve),this.view.game.drawPlayersAndBall(this.physics),this.view.fadeInOut.setBlackAlphaTo(1),this.audio.sounds.bgm.play()),this.view.game.drawGameStartMessage(this.frameCounter,this.frameTotal.startOfNewGame),this.view.game.drawCloudsAndWave(),this.view.fadeInOut.changeBlackAlphaBy(-1/17),this.frameCounter++,this.frameCounter>=this.frameTotal.startOfNewGame&&(this.frameCounter=0,this.view.fadeInOut.setBlackAlphaTo(0),this.state=this.round)}round(){const e=1===this.keyboardArray[0].powerHit||1===this.keyboardArray[1].powerHit;if(!0===this.physics.player1.isComputer&&!0===this.physics.player2.isComputer&&e)return this.frameCounter=0,this.view.game.visible=!1,void(this.state=this.intro);const t=this.physics.runEngineForNextFrame(this.keyboardArray);if(this.playSoundEffect(),this.view.game.drawPlayersAndBall(this.physics),this.view.game.drawCloudsAndWave(),!0===this.gameEnded)return this.view.game.drawGameEndMessage(this.frameCounter),this.frameCounter++,void((this.frameCounter>=this.frameTotal.gameEnd||this.frameCounter>=70&&e)&&(this.frameCounter=0,this.view.game.visible=!1,this.state=this.intro));t&&!1===this._isPracticeMode&&!1===this.roundEnded&&!1===this.gameEnded&&(this.physics.ball.punchEffectX<p?(this.scores[1]+=1,this.scores[1]>=this.winningScore&&(this.gameEnded=!0,this.physics.player1.isWinner=!1,this.physics.player2.isWinner=!0,this.physics.player1.gameEnded=!0,this.physics.player2.gameEnded=!0)):(this.scores[0]+=1,this.scores[0]>=this.winningScore&&(this.gameEnded=!0,this.physics.player1.isWinner=!0,this.physics.player2.isWinner=!1,this.physics.player1.gameEnded=!0,this.physics.player2.gameEnded=!0)),this.view.game.drawScoresToScoreBoards(this.scores),!1===this.roundEnded&&!1===this.gameEnded&&(this.slowMotionFramesLeft=this.SLOW_MOTION_FRAMES_NUM),this.roundEnded=!0),!0===this.roundEnded&&!1===this.gameEnded&&0===this.slowMotionFramesLeft&&(this.view.fadeInOut.changeBlackAlphaBy(1/16),this.state=this.afterEndOfRound)}afterEndOfRound(){this.view.fadeInOut.changeBlackAlphaBy(1/16),this.frameCounter++,this.frameCounter>=this.frameTotal.afterEndOfRound&&(this.frameCounter=0,this.state=this.beforeStartOfNextRound)}beforeStartOfNextRound(){0===this.frameCounter&&(this.view.fadeInOut.setBlackAlphaTo(1),this.view.game.drawReadyMessage(!1),this.physics.player1.initializeForNewRound(),this.physics.player2.initializeForNewRound(),this.physics.ball.initializeForNewRound(this.isPlayer2Serve),this.view.game.drawPlayersAndBall(this.physics)),this.view.game.drawCloudsAndWave(),this.view.fadeInOut.changeBlackAlphaBy(-1/16),this.frameCounter++,this.frameCounter%5==0&&this.view.game.toggleReadyMessage(),this.frameCounter>=this.frameTotal.beforeStartOfNextRound&&(this.frameCounter=0,this.view.game.drawReadyMessage(!1),this.view.fadeInOut.setBlackAlphaTo(0),this.roundEnded=!1,this.state=this.round)}playSoundEffect(){const e=this.audio;for(let t=0;t<2;t++){const s=this.physics[`player${t+1}`].sound;let i=0;this.isStereoSound&&(i=0===t?-1:1),!0===s.pipikachu&&(e.sounds.pipikachu.play(i),s.pipikachu=!1),!0===s.pika&&(e.sounds.pika.play(i),s.pika=!1),!0===s.chu&&(e.sounds.chu.play(i),s.chu=!1)}const t=this.physics.ball,s=t.sound;let i=0;this.isStereoSound&&(t.punchEffectX<p?i=-1:t.punchEffectX>p&&(i=1)),!0===s.powerHit&&(e.sounds.powerHit.play(i),s.powerHit=!1),!0===s.ballTouchesGround&&(e.sounds.ballTouchesGround.play(i),s.ballTouchesGround=!1)}restart(){this.frameCounter=0,this.noInputFrameCounter=0,this.slowMotionFramesLeft=0,this.slowMotionNumOfSkippedFrames=0,this.view.menu.visible=!1,this.view.game.visible=!1,this.state=this.intro}get isPracticeMode(){return this._isPracticeMode}set isPracticeMode(e){this._isPracticeMode=e,this.view.game.scoreBoards[0].visible=!e,this.view.game.scoreBoards[1].visible=!e}}const he=i.Xd;he.RESOLUTION=window.devicePixelRatio,he.SCALE_MODE=i.aH.NEAREST,he.ROUND_PIXELS=!0;const de=i.e6({width:432,height:304,antialias:!1,backgroundColor:0,transparent:!1}),ce=new i.W2,ue=new i.vB,me=new i.aN;de.view.setAttribute("id","game-canvas"),document.getElementById("game-canvas-container").appendChild(de.view),de.render(ce),me.add(z.d.SPRITE_SHEET);for(const e in z.d.SOUNDS)me.add(z.d.SOUNDS[e]);function ye(){const e=new re(ce,me.resources);(function(e,t){!function(e,t){const s=document.getElementById("game-dropdown-btn"),i=document.getElementById("options-dropdown-btn"),n=document.getElementById("about-btn");s.disabled=!1,i.disabled=!1,n.disabled=!1;const l=document.getElementById("pause-btn");l.addEventListener("click",(()=>{l.classList.contains("selected")?(l.classList.remove("selected"),h.resume(e,3)):(l.classList.add("selected"),h.pause(e,3))})),document.getElementById("restart-btn").addEventListener("click",(()=>{l.classList.contains("selected")&&(l.classList.remove("selected"),h.resume(e,3)),e.restart()}));const d=document.getElementById("bgm-on-btn"),c=document.getElementById("bgm-off-btn");d.addEventListener("click",(()=>{c.classList.remove("selected"),d.classList.add("selected"),e.audio.turnBGMVolume(!0)})),c.addEventListener("click",(()=>{d.classList.remove("selected"),c.classList.add("selected"),e.audio.turnBGMVolume(!1)}));const u=document.getElementById("stereo-btn"),m=document.getElementById("mono-btn"),y=document.getElementById("sfx-off-btn");u.addEventListener("click",(()=>{m.classList.remove("selected"),y.classList.remove("selected"),u.classList.add("selected"),e.audio.turnSFXVolume(!0),e.isStereoSound=!0})),m.addEventListener("click",(()=>{y.classList.remove("selected"),u.classList.remove("selected"),m.classList.add("selected"),e.audio.turnSFXVolume(!0),e.isStereoSound=!1})),y.addEventListener("click",(()=>{u.classList.remove("selected"),m.classList.remove("selected"),y.classList.add("selected"),e.audio.turnSFXVolume(!1)}));const p=document.getElementById("slow-speed-btn"),b=document.getElementById("medium-speed-btn"),g=document.getElementById("fast-speed-btn");p.addEventListener("click",(()=>{b.classList.remove("selected"),g.classList.remove("selected"),p.classList.add("selected"),e.normalFPS=20,t.maxFPS=e.normalFPS})),b.addEventListener("click",(()=>{g.classList.remove("selected"),p.classList.remove("selected"),b.classList.add("selected"),e.normalFPS=25,t.maxFPS=e.normalFPS})),g.addEventListener("click",(()=>{p.classList.remove("selected"),b.classList.remove("selected"),g.classList.add("selected"),e.normalFPS=30,t.maxFPS=e.normalFPS}));const f=document.getElementById("winning-score-5-btn"),v=document.getElementById("winning-score-10-btn"),k=document.getElementById("winning-score-15-btn"),w=document.getElementById("winning-score-30-btn"),S=document.getElementById("notice-box-1"),E=document.getElementById("notice-ok-btn-1"),L=document.getElementById("winning-score-in-notice-box-1");function x(t){return!(e.state!==e.round&&e.state!==e.afterEndOfRound&&e.state!==e.beforeStartOfNextRound||!(e.scores[0]>=t||e.scores[1]>=t))}const P=document.getElementById("notice-box-2"),C=document.getElementById("notice-ok-btn-2");f.addEventListener("click",(()=>{if(!f.classList.contains("selected")){if(!0===e.isPracticeMode)return P.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,n.disabled=!0,void h.pause(e,2);if(x(5))return L.textContent="5",S.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,n.disabled=!0,void h.pause(e,2);v.classList.remove("selected"),k.classList.remove("selected"),w.classList.remove("selected"),f.classList.add("selected"),e.winningScore=5}})),v.addEventListener("click",(()=>{if(!v.classList.contains("selected")){if(!0===e.isPracticeMode)return P.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,n.disabled=!0,void h.pause(e,2);if(x(10))return L.textContent="10",S.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,n.disabled=!0,void h.pause(e,2);f.classList.remove("selected"),k.classList.remove("selected"),w.classList.remove("selected"),v.classList.add("selected"),e.winningScore=10}})),k.addEventListener("click",(()=>{if(!k.classList.contains("selected")){if(!0===e.isPracticeMode)return P.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,n.disabled=!0,void h.pause(e,2);if(x(15))return L.textContent="15",S.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,n.disabled=!0,void h.pause(e,2);f.classList.remove("selected"),v.classList.remove("selected"),w.classList.remove("selected"),k.classList.add("selected"),e.winningScore=15}})),w.addEventListener("click",(()=>{if(!w.classList.contains("selected")){if(!0===e.isPracticeMode)return P.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,n.disabled=!0,void h.pause(e,2);if(x(30))return L.textContent="30",S.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,n.disabled=!0,void h.pause(e,2);f.classList.remove("selected"),v.classList.remove("selected"),k.classList.remove("selected"),w.classList.add("selected"),e.winningScore=30}})),E.addEventListener("click",(()=>{S.classList.contains("hidden")||(S.classList.add("hidden"),s.disabled=!1,i.disabled=!1,n.disabled=!1,h.resume(e,2))})),C.addEventListener("click",(()=>{P.classList.contains("hidden")||(P.classList.add("hidden"),s.disabled=!1,i.disabled=!1,n.disabled=!1,h.resume(e,2))}));const B=document.getElementById("practice-mode-on-btn"),I=document.getElementById("practice-mode-off-btn");B.addEventListener("click",(()=>{I.classList.remove("selected"),B.classList.add("selected"),e.isPracticeMode=!0})),I.addEventListener("click",(()=>{B.classList.remove("selected"),I.classList.add("selected"),e.isPracticeMode=!1}));const N=document.getElementById("serve-mode-random-btn"),D=document.getElementById("serve-mode-fixed-btn");function M(e){return e.filter((e=>!0===e)).length}N.addEventListener("click",(()=>{D.classList.remove("selected"),N.classList.add("selected"),a=0})),D.addEventListener("click",(()=>{N.classList.remove("selected"),D.classList.add("selected"),a=1}));const T=document.getElementById("serve-available-player1-0-btn"),V=document.getElementById("serve-available-player1-1-btn"),A=document.getElementById("serve-available-player1-2-btn"),H=document.getElementById("serve-available-player1-3-btn"),W=document.getElementById("serve-available-player1-4-btn"),R=document.getElementById("serve-available-player1-5-btn"),F=document.getElementById("serve-available-player1-6-btn"),O=document.getElementById("serve-available-player1-7-btn"),_=document.getElementById("serve-available-player1-8-btn"),U=document.getElementById("serve-available-player2-0-btn"),K=document.getElementById("serve-available-player2-1-btn"),G=document.getElementById("serve-available-player2-2-btn"),X=document.getElementById("serve-available-player2-3-btn"),j=document.getElementById("serve-available-player2-4-btn"),z=document.getElementById("serve-available-player2-5-btn");T.addEventListener("click",(()=>{console.log(M(o)),!0===o[0]&&M(o)>=2?(o[0]=!1,T.classList.remove("selected")):!1===o[0]&&(o[0]=!0,T.classList.add("selected"))})),V.addEventListener("click",(()=>{console.log(M(o)),!0===o[1]&&M(o)>=2?(o[1]=!1,V.classList.remove("selected")):!1===o[1]&&(o[1]=!0,V.classList.add("selected"))})),A.addEventListener("click",(()=>{console.log(M(o)),!0===o[2]&&M(o)>=2?(o[2]=!1,A.classList.remove("selected")):!1===o[2]&&(o[2]=!0,A.classList.add("selected"))})),H.addEventListener("click",(()=>{console.log(M(o)),!0===o[3]&&M(o)>=2?(o[3]=!1,H.classList.remove("selected")):!1===o[3]&&(o[3]=!0,H.classList.add("selected"))})),W.addEventListener("click",(()=>{console.log(M(o)),!0===o[4]&&M(o)>=2?(o[4]=!1,W.classList.remove("selected")):!1===o[4]&&(o[4]=!0,W.classList.add("selected"))})),R.addEventListener("click",(()=>{console.log(M(o)),!0===o[5]&&M(o)>=2?(o[5]=!1,R.classList.remove("selected")):!1===o[5]&&(o[5]=!0,R.classList.add("selected"))})),F.addEventListener("click",(()=>{console.log(M(o)),!0===o[6]&&M(o)>=2?(o[6]=!1,F.classList.remove("selected")):!1===o[6]&&(o[6]=!0,F.classList.add("selected"))})),O.addEventListener("click",(()=>{console.log(M(o)),!0===o[7]&&M(o)>=2?(o[7]=!1,O.classList.remove("selected")):!1===o[7]&&(o[7]=!0,O.classList.add("selected"))})),_.addEventListener("click",(()=>{console.log(M(o)),!0===o[8]&&M(o)>=2?(o[8]=!1,_.classList.remove("selected")):!1===o[8]&&(o[8]=!0,_.classList.add("selected"))})),U.addEventListener("click",(()=>{console.log(M(r)),!0===r[0]&&M(r)>=2?(r[0]=!1,U.classList.remove("selected")):!1===r[0]&&(r[0]=!0,U.classList.add("selected"))})),K.addEventListener("click",(()=>{console.log(M(r)),!0===r[1]&&M(r)>=2?(r[1]=!1,K.classList.remove("selected")):!1===r[1]&&(r[1]=!0,K.classList.add("selected"))})),G.addEventListener("click",(()=>{console.log(M(r)),!0===r[2]&&M(r)>=2?(r[2]=!1,G.classList.remove("selected")):!1===r[2]&&(r[2]=!0,G.classList.add("selected"))})),X.addEventListener("click",(()=>{console.log(M(r)),!0===r[3]&&M(r)>=2?(r[3]=!1,X.classList.remove("selected")):!1===r[3]&&(r[3]=!0,X.classList.add("selected"))})),j.addEventListener("click",(()=>{console.log(M(r)),!0===r[4]&&M(r)>=2?(r[4]=!1,j.classList.remove("selected")):!1===r[4]&&(r[4]=!0,j.classList.add("selected"))})),z.addEventListener("click",(()=>{console.log(M(r)),!0===r[5]&&M(r)>=2?(r[5]=!1,z.classList.remove("selected")):!1===r[5]&&(r[5]=!0,z.classList.add("selected"))}));const Y=document.getElementById("about-box"),J=document.getElementById("close-about-btn");n.addEventListener("click",(()=>{Y.classList.contains("hidden")?(Y.classList.remove("hidden"),s.disabled=!0,i.disabled=!0,h.pause(e,2)):(Y.classList.add("hidden"),s.disabled=!1,i.disabled=!1,h.resume(e,2))})),J.addEventListener("click",(()=>{Y.classList.contains("hidden")||(Y.classList.add("hidden"),s.disabled=!1,i.disabled=!1,h.resume(e,2))}))}(e,t),function(e){window.addEventListener("click",(t=>{t.target.matches(".dropdown-btn, .submenu-btn")||(m(),u(""),h.resume(e,1))})),document.getElementById("game-dropdown-btn").addEventListener("click",(()=>{d("game-dropdown",e)})),document.getElementById("options-dropdown-btn").addEventListener("click",(()=>{d("options-dropdown",e)})),document.getElementById("bgm-submenu-btn").addEventListener("mouseover",(()=>{c("bgm-submenu-btn","bgm-submenu")})),document.getElementById("sfx-submenu-btn").addEventListener("mouseover",(()=>{c("sfx-submenu-btn","sfx-submenu")})),document.getElementById("speed-submenu-btn").addEventListener("mouseover",(()=>{c("speed-submenu-btn","speed-submenu")})),document.getElementById("winning-score-submenu-btn").addEventListener("mouseover",(()=>{c("winning-score-submenu-btn","winning-score-submenu")})),document.getElementById("practice-mode-submenu-btn").addEventListener("mouseover",(()=>{c("practice-mode-submenu-btn","practice-mode-submenu")})),document.getElementById("serve-mode-submenu-btn").addEventListener("mouseover",(()=>{c("serve-mode-submenu-btn","serve-mode-submenu")})),document.getElementById("serve-available-player1-submenu-btn").addEventListener("mouseover",(()=>{c("serve-available-player1-submenu-btn","serve-available-player1-submenu")})),document.getElementById("serve-available-player2-submenu-btn").addEventListener("mouseover",(()=>{c("serve-available-player2-submenu-btn","serve-available-player2-submenu")})),document.getElementById("bgm-submenu-btn").addEventListener("click",(()=>{c("bgm-submenu-btn","bgm-submenu")})),document.getElementById("sfx-submenu-btn").addEventListener("click",(()=>{c("sfx-submenu-btn","sfx-submenu")})),document.getElementById("speed-submenu-btn").addEventListener("click",(()=>{c("speed-submenu-btn","speed-submenu")})),document.getElementById("winning-score-submenu-btn").addEventListener("click",(()=>{c("winning-score-submenu-btn","winning-score-submenu")})),document.getElementById("practice-mode-submenu-btn").addEventListener("click",(()=>{c("practice-mode-submenu-btn","practice-mode-submenu")})),document.getElementById("serve-mode-submenu-btn").addEventListener("click",(()=>{c("serve-mode-submenu-btn","serve-mode-submenu")})),document.getElementById("serve-available-player1-submenu-btn").addEventListener("click",(()=>{c("serve-available-player1-submenu-btn","serve-available-player1-submenu")})),document.getElementById("serve-available-player2-submenu-btn").addEventListener("click",(()=>{c("serve-available-player2-submenu-btn","serve-available-player2-submenu")}))}(e),window.addEventListener("keydown",(e=>{if("Escape"===e.code){const t=document.getElementById("menu-bar");t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden"),e.preventDefault()}else"Space"===e.code&&document.getElementById("about-box").classList.contains("hidden")&&e.preventDefault()}))})(e,ue),function(e){ue.maxFPS=e.normalFPS,ue.add((()=>{e.gameLoop(),de.render(ce)})),ue.start()}(e)}!function(){const e=document.getElementById("loading-box"),t=document.getElementById("progress-bar");me.onProgress.add((()=>{t.style.width=`${me.progress}%`})),me.onComplete.add((()=>{e.classList.contains("hidden")||e.classList.add("hidden")}));const s=document.getElementById("about-box"),i=document.getElementById("about-btn"),n=document.getElementById("close-about-btn"),l=document.getElementById("game-dropdown-btn"),a=document.getElementById("options-dropdown-btn");l.disabled=!0,a.disabled=!0;const o=()=>{s.classList.contains("hidden")||(s.classList.add("hidden"),i.disabled=!0),i.getElementsByClassName("text-play")[0].classList.add("hidden"),i.getElementsByClassName("text-about")[0].classList.remove("hidden"),i.classList.remove("glow"),n.getElementsByClassName("text-play")[0].classList.add("hidden"),n.getElementsByClassName("text-close")[0].classList.remove("hidden"),n.classList.remove("glow"),me.load(ye),e.classList.remove("hidden"),i.removeEventListener("click",o),n.removeEventListener("click",o)};i.addEventListener("click",o),n.addEventListener("click",o),(()=>{try{return window.self!==window.top}catch(e){return!0}})()&&(document.getElementById("flex-container").classList.add("embedded-in-other-website"),Array.from(document.getElementsByClassName("if-embedded-in-other-website")).forEach((e=>e.classList.remove("hidden"))),Array.from(document.querySelectorAll(".if-embedded-in-other-website button")).forEach((e=>e.addEventListener("click",(()=>{Array.from(document.getElementsByClassName("if-embedded-in-other-website")).forEach((e=>e.classList.add("hidden")))})))))}()}},e=>{e.O(0,[511],(()=>(372,e(e.s=372)))),e.O()}]);
//# sourceMappingURL=main.bundle.js.map